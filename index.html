<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIFTHAHUL HUDA MADRASA</title>
    <meta name="description" content="Portfolio of MIFTHAHUL HUDA MADRASA. Exploring technology and sharing knowledge.">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>

<body>
    <header id="main-header">
        <nav class="container">
            <a href="index.html#hero" class="logo">MHMV 2026.</a>
            <ul class="nav-links">
                <li><a href="index.html#hero">Home</a></li>
                <li><a href="services.html">Services</a></li>
                <li class="dropdown">
                    <a href="gallery.html" class="dropdown-toggle">Gallery</a>
                    <ul class="dropdown-menu">
                        <li><a href="gallery.html?tab=photo">Photo Gallery</a></li>
                        <li><a href="gallery.html?tab=video">Video Gallery</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Student Zone</a>
                    <ul class="dropdown-menu">
                        <li><a href="creative.html">Fee Payment</a></li>
                        <li><a href="restored_pages/creative.html">Creative Submission</a></li>
                        <li><a href="creation_receipt.html">Approved Receipts</a></li>
                        <li><a href="creations.html">Creations</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Result</a>
                    <ul class="dropdown-menu">
                        <li><a href="result.html">Exam Result (New)</a></li>
                        <li><a href="exam_result.html">Exam Result (Old)</a></li>
                    </ul>
                </li>
                <li><a href="student_dashboard.html">Student Dashboard</a></li>
                <li><a href="booking.html" style="color: #00f3ff;">Booking</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Portal</a>
                    <ul class="dropdown-menu">
                        <li><a href="portal/">Portal</a></li>
                        <li class="admin-only" style="display: none;"><a href="portal/"
                                style="font-weight: 600; color: var(--primary-color);">Admin
                                Panel</a></li>
                    </ul>
                </li>
                <li><a href="#contact" class="btn-secondary" style="padding: 8px 15px;">Contact</a></li>
            </ul>
            <button class="mobile-menu-btn" aria-label="Toggle navigation">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </nav>
    </header>

    <main>
        <section id="hero"
            style="position: relative; min-height: 100vh; display: flex; align-items: center; overflow: hidden;">
            <!-- Hero Background Circles -->
            <div class="hero-bg">
                <div class="circle circle-1"></div>
                <div class="circle circle-2"></div>
            </div>

            <!-- Three.js Animated Background -->
            <canvas id="hero-canvas"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;"></canvas>


            <!-- Content overlay -->
            <div class="container hero-content" style="position: relative; z-index: 1;">
                <h2 class="animate-fade-up">Welcome to</h2>
                <h1 class="animate-fade-up delay-1">MIFTHAHUL HUDA MADRASA</h1>
                <h3 class="animate-fade-up delay-2">Vengara S S Road</h3>
                <p class="animate-fade-up delay-3">
                    A simple reminder that consistent effort and dedication in learning today pave the way for
                    achievement and success in the future.
                </p>
                <div class="cta-group animate-fade-up delay-4">
                    <a href="creative.html#creative" class="btn btn-primary">Book Buy</a>
                    <a href="#gallery" class="btn btn-secondary"
                        style="border-color: var(--primary-color); color: var(--primary-color);">View Gallery</a>
                    <a href="#contact" class="btn btn-secondary">Contact Us</a>
                </div>
            </div>


        </section>

        <section id="about">
            <div class="container">
                <div class="about-grid overhaul-content">
                    <div class="about-text">
                        <h2 class="section-title">Student Results</h2>
                        <p>
                            Verify student performance directly from our official examination database.
                            Enter your Register Number below to view immediate results and standigs.
                        </p>

                        <!-- Premium Search Box for Homepage -->
                        <div class="search-premium" style="margin-top: 30px; margin-bottom: 40px; max-width: 500px;">
                            <div class="home-search-box"
                                style="display: flex; background: rgba(255, 255, 255, 0.05); border: 1px solid var(--glass-border); border-radius: 12px; padding: 5px; transition: all 0.3s ease;">
                                <input type="text" id="home-regno" placeholder="Enter Register No (e.g. 101)"
                                    style="flex: 1; background: none; border: none; font-family: inherit; padding: 12px 20px; color: #fff; font-size: 1rem; outline: none;">
                                <button onclick="fetchHomeResult()"
                                    style="background: var(--primary-color); border: none; padding: 0 25px; border-radius: 8px; color: #000; font-weight: 700; cursor: pointer; transition: 0.3s; height: 45px;">View</button>
                            </div>
                            <div id="home-status"
                                style="margin-top: 10px; font-size: 0.85rem; color: #888; text-align: center; height: 20px;">
                            </div>
                        </div>

                        <!-- Result Modal/Overlay (Simple version for homepage) -->
                        <div id="home-result-container"
                            style="display: none; background: rgba(0, 243, 255, 0.03); border: 1px solid rgba(0, 243, 255, 0.2); padding: 25px; border-radius: 15px; margin-top: 20px; animation: fadeIn 0.5s ease;">
                            <div id="home-result-area"></div>
                            <a href="result.html" class="btn-link"
                                style="display: inline-block; margin-top: 15px; color: var(--primary-color);">View Full
                                Transcript ‚Üí</a>
                        </div>
                    </div>

                    <div class="about-text">
                        <h2 class="section-title">Educational Programs</h2>
                        <p>
                            Our Madrasa offers a range of structured educational programs designed to develop both
                            religious and
                            academic knowledge. These include Qur‚Äôan memorization classes, Tajweed and Arabic language
                            lessons,
                            Islamic studies, and age‚Äëbased learning tracks that are updated regularly. Each program is
                            tailored
                            to help students grow in knowledge, character, and spiritual understanding.
                        </p>

                        <h2 class="section-title" style="margin-top: 30px;">Our Core Skills</h2>
                        <div class="skills-wrapper">
                            <div class="skills-grid">
                                <div class="skill-card">
                                    <span class="icon">üìñ</span>
                                    <h3>Qur'an Recitation</h3>
                                    <p>Advanced Tajweed and rhythmic recitation techniques.</p>
                                </div>
                                <div class="skill-card">
                                    <span class="icon">‚úçÔ∏è</span>
                                    <h3>Calligraphy</h3>
                                    <p>Traditional Arabic script and modern artistic styles.</p>
                                </div>
                                <div class="skill-card">
                                    <span class="icon">ü§ù</span>
                                    <h3>Ethics & Morality</h3>
                                    <p>Developing character and social responsibility.</p>
                                </div>
                                <div class="skill-card">
                                    <span class="icon">üé§</span>
                                    <h3>Public Speaking</h3>
                                    <p>Confidence building through student presentations.</p>
                                </div>
                            </div>
                        </div>

                        <h2 class="section-title" style="margin-top: 30px;">Meetings & Community Engagement</h2>
                        <p>
                            Regular meetings are held with students, parents, and faculty to discuss progress reports,
                            upcoming
                            events, and educational goals. These gatherings help build strong communication between home
                            and
                            school and ensure that everyone works together to support student success. Meetings are
                            documented
                            with minutes and action points so key decisions and follow‚Äëups are clear and actionable.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="dashboard" style="padding: 0; margin-top: -100px;"></section>
        <!-- Services Section -->
        <section id="services">
            <div class="container">
                <h2 class="section-title">Our Services</h2>
                <div class="services-grid" id="services-grid-home">
                    <!-- Cards rendered dynamically via JS -->
                </div>

                <script type="module">
                    import { services } from './services-data.js';
                    const grid = document.getElementById('services-grid-home');
                    if (grid) {
                        grid.innerHTML = services.map(service => `
                            <a href="services.html#${service.id}" class="service-card animate-fade-up">
                                <i class="${service.icon} service-icon"></i>
                                <h3>${service.title}</h3>
                                <p>${service.shortDescription}</p>
                                <ul class="service-list">
                                    ${service.bulletPoints.slice(0, 2).map(text => `<li>${text}</li>`).join('')}
                                </ul>
                            </a>
                        `).join('');
                    }
                </script>
            </div>
        </section>


        <!-- News & Notice Section -->
        <section id="news-notice">
            <div class="container">
                <h2 class="section-title">News & Notice</h2>
                <div class="news-container">
                    <p>Stay updated with our latest announcements, schedule changes, and achievements.</p>
                    <div id="notice-content" class="animate-fade-up">
                        <div
                            style="background: rgba(0,243,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid var(--primary-color);">
                            <h4 style="color: var(--primary-color);">Admission Open 2026</h4>
                            <p style="font-size: 0.9rem; margin-top: 10px;">We are now accepting registrations for the
                                new academic session. Book your seat today!</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Latest Sessions Section -->
        <section id="latest-sessions">
            <div class="container">
                <h2 class="section-title">Latest Sessions</h2>
                <div id="pdf-list" class="sessions-list">
                    <!-- Dynamic PDFs will load here -->
                    <div class="no-sessions">Loading official documents...</div>
                </div>
            </div>
        </section>

        <!-- Upcoming Events Section -->
        <section id="events">
            <div class="container">
                <h2 class="section-title">Upcoming Events</h2>
                <div class="events-grid">
                    <div class="event-card">
                        <div class="event-date">MAR 15, 2026</div>
                        <h3>Annual Day 2026</h3>
                        <p>Join us for our grand annual celebration featuring student performances and awards.</p>
                        <span class="event-tag">Institutional</span>
                    </div>
                    <div class="event-card">
                        <div class="event-date">APR 02, 2026</div>
                        <h3>Islamic Quiz Competition</h3>
                        <p>Testing the knowledge of our students in a healthy and engaging environment.</p>
                        <span class="event-tag">Academic</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects & Achievements Section -->
        <section id="projects">
            <div class="container">
                <h2 class="section-title">Major Projects</h2>
                <div class="projects-grid">
                    <div class="project-card">
                        <div class="project-image">
                            <div class="img-placeholder"
                                style="background: linear-gradient(45deg, var(--bg-color), var(--primary-color)); opacity: 0.3;">
                            </div>
                        </div>
                        <div class="project-content">
                            <h3>Smart Classroom Initiative</h3>
                            <p>Integrating digital tools into Islamic education for interactive learning.</p>
                            <div class="tech-stack">
                                <span>Digital</span>
                                <span>EdTech</span>
                            </div>
                        </div>
                    </div>
                    <div class="project-card">
                        <div class="project-image">
                            <div class="img-placeholder"
                                style="background: linear-gradient(45deg, var(--bg-color), var(--secondary-color)); opacity: 0.3;">
                            </div>
                        </div>
                        <div class="project-content">
                            <h3>Community Outreach</h3>
                            <p>Students participating in local social welfare and environmental programs.</p>
                            <div class="tech-stack">
                                <span>Social</span>
                                <span>Service</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Video Gallery Section -->
        <section id="video-gallery">
            <div class="container">
                <h2 class="section-title">Video Gallery</h2>
                <div id="video-list" class="video-grid">
                    <!-- Dynamic Videos will load here -->
                    <div class="video-item">
                        <video controls poster="assets/refont_calligraphic (4).png"
                            style="width: 100%; border-radius: 12px; border: 1px solid var(--glass-border);">
                            <source src="assets/gallary/videos/WhatsApp Video 2025-11-20 at 11.51.28 AM.mp4"
                                type="video/mp4">
                        </video>
                    </div>
                </div>
            </div>
        </section>

        <!-- Creations Section -->
        <section id="creations">
            <div class="container">
                <h2 class="section-title">Student Creations</h2>
                <div id="creations-grid" class="creations-grid">
                    <div class="creation-card drawing">
                        <div class="drawing-frame" style="height: 250px; overflow: hidden; border-radius: 12px;">
                            <img src="assets/refont_calligraphic (4).png" alt="Student Drawing"
                                style="width: 100%; height: 100%; object-fit: cover;">
                        </div>
                        <div class="creation-info" style="padding: 20px;">
                            <h3>Islamic Calligraphy</h3>
                            <p>By Muhsin U2 - Class 10</p>
                        </div>
                    </div>
                    <div class="creation-card story"
                        style="padding: 30px; background: var(--glass-bg); border-radius: 12px; border: 1px solid var(--glass-border);">
                        <div class="story-content">
                            <h3>The Path of Knowledge</h3>
                            <p style="font-style: italic; color: #888; margin-top: 10px;">"A short story about the
                                journey of a young student seeking wisdom..."</p>
                            <a href="creations.html" class="btn-link"
                                style="color: var(--secondary-color); font-weight: 600; display: inline-block; margin-top: 15px;">Read
                                Full Story ‚Üí</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="dialog-message dialog-lightbox-message" style="display: none;">
            <div data-elementor-type="popup" data-elementor-id="748"
                class="elementor elementor-748 elementor-location-popup"
                data-elementor-settings="{&quot;prevent_scroll&quot;:&quot;yes&quot;,&quot;a11y_navigation&quot;:&quot;yes&quot;,&quot;triggers&quot;:{&quot;inactivity_time&quot;:5,&quot;inactivity&quot;:&quot;yes&quot;},&quot;timing&quot;:[]}"
                data-elementor-post-type="elementor_library" style="display: block;">
                <div class="elementor-element elementor-element-32902fd e-flex e-con-boxed e-con e-parent"
                    data-id="32902fd" data-element_type="container">
                    <div class="e-con-inner">
                        <div class="elementor-element elementor-element-4379674 elementor-widget elementor-widget-heading"
                            data-id="4379674" data-element_type="widget" data-widget_type="heading.default">
                            <form class="booking-form" id="tuition-form"
                                action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSfzhjNS8F_8_BvbwYFFZMxqfmdJqMTJx2rik6C29szqPPc9EA/formResponse"
                                method="POST" target="hidden_iframe">
                                <!-- Google Form Internal Hidden Fields -->
                                <input type="hidden" name="fvv" value="1">
                                <input type="hidden" name="fbzx" value="-5401259598252436307">
                                <input type="hidden" name="pageHistory" value="0">
                                <input type="hidden" name="entry.202934602" value="Option 1">
                                <input type="hidden" name="entry.202934602_sentinel" value="">
                                <input type="hidden" name="entry.63709490_sentinel" value="">
                                <input type="hidden" name="entry.9885691_sentinel" value="">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="fname">First Name</label>
                                        <input type="text" name="entry.819151435" id="fname" placeholder="First Name"
                                            required="">
                                    </div>
                                    <div class="form-group">
                                        <label for="lname">Last Name</label>
                                        <input type="text" name="entry.1242527177" id="lname" placeholder="Last Name"
                                            required="">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="email">Email Address</label>
                                    <input type="email" name="entry.1739343054" id="email" placeholder="Your Email"
                                        required="">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Subject (Max 8)</label>
                                    <!-- Hidden inputs for granular Google Form mapping -->
                                    <input type="hidden" name="entry.63709490" id="booking-subjects-hidden" value="">
                                    <input type="hidden" name="entry.9885691" id="booking-class-hidden" value="">
                                    <input type="hidden" name="entry.116107118" id="booking-price-hidden" value="">

                                    <div class="checkbox-grid" id="subject-checkboxes">
                                        Loading subjects...
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Class</label>
                                    <div class="radio-group classes-grid" id="class-radios">
                                        <label class="radio-label"><input type="radio" name="class" value="1"
                                                required="" data-multiplier="1"> 1</label>
                                        <label class="radio-label"><input type="radio" name="class" value="2"
                                                data-multiplier="1">
                                            2</label>
                                        <label class="radio-label"><input type="radio" name="class" value="3"
                                                data-multiplier="1">
                                            3</label>
                                        <label class="radio-label"><input type="radio" name="class" value="4"
                                                data-multiplier="1">
                                            4</label>
                                        <label class="radio-label"><input type="radio" name="class" value="5"
                                                data-multiplier="1">
                                            5</label>
                                        <label class="radio-label"><input type="radio" name="class" value="6"
                                                data-multiplier="1">
                                            6</label>
                                        <label class="radio-label"><input type="radio" name="class" value="7"
                                                data-multiplier="1">
                                            7</label>
                                        <label class="radio-label"><input type="radio" name="class" value="8"
                                                data-multiplier="1">
                                            8</label>
                                        <label class="radio-label"><input type="radio" name="class" value="9"
                                                data-multiplier="1">
                                            9</label>
                                        <label class="radio-label"><input type="radio" name="class" value="10"
                                                data-multiplier="1">
                                            10</label>
                                        <label class="radio-label"><input type="radio" name="class" value="11"
                                                data-multiplier="1">
                                            +1</label>
                                        <label class="radio-label"><input type="radio" name="class" value="12"
                                                data-multiplier="1">
                                            +2</label>
                                    </div>
                                </div>

                                <div class="price-box">
                                    <h3>Total Price: <span id="total-price">‚Çπ0</span></h3>
                                </div>

                                <div class="form-group"
                                    style="margin-top: 25px; display: flex; flex-direction: column; gap: 10px;">
                                    <button type="submit" class="btn btn-primary" style="width: 100%;">Book Now</button>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
                </section>

                <section id="contact">
                    <div class="container">
                        <div class="contact-content">
                            <h2 class="section-title">Get In Touch</h2>
                            <p>Interested in collaborating or having me speak at your event? Let's connect.</p>

                            <!-- Form Submission Feedback -->
                            <script type="text/javascript">var submitted = false;</script>
                            <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"
                                onload="if(submitted) {document.getElementById('contact-status').innerHTML = 'Message Sent Successfully!'; document.getElementById('contact-form-el').reset(); submitted=false;}"></iframe>

                            <form class="contact-form" id="contact-form-el"
                                action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSfq5PjEIs83m4gq7_-ihVbqAWJa_KNKgtQ2huzvKCQSfesDYQ/formResponse"
                                method="POST" target="hidden_iframe" onsubmit="submitted=true;">
                                <div class="form-group">
                                    <input type="text" name="entry.456300294" placeholder="Your Name" required>
                                </div>
                                <div class="form-group">
                                    <input type="email" name="entry.1582502936" placeholder="Your Email" required>
                                </div>
                                <div class="form-group">
                                    <textarea name="entry.1231984071" placeholder="Your Message" rows="5"
                                        required></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">Send Message</button>
                                <div id="contact-status"
                                    style="margin-top: 15px; color: var(--primary-color); font-weight: 600; min-height: 24px;">
                                </div>
                            </form>

                            <div class="contact-info">
                                <p>WhatsApp: <a href="https://wa.me/916235989198">+91 6235989198</a></p>
                                <div class="social-links-large">
                                    <a href="https://github.com/sareef6235" class="social-icon">GitHub</a>
                                    <a href="https://wa.me/916235989198" class="social-icon">WhatsApp</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>


    </main>

    <script src="script.js"></script>

    <!-- Three.js Background Animation -->
    <script>
        const canvas = document.getElementById('hero-canvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });

        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        camera.position.z = 5;

        // Create particles
        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 1500;
        const posArray = new Float32Array(particlesCount * 3);

        for (let i = 0; i < particlesCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 10;
        }

        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));

        // Create material with cyan color
        const particlesMaterial = new THREE.PointsMaterial({
            size: 0.015,
            color: 0x00f3ff,
            transparent: true,
            opacity: 0.8,
            blending: THREE.AdditiveBlending
        });

        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);

        // Animation
        let mouseX = 0;
        let mouseY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(e.clientY / window.innerHeight) * 2 + 1;
        });

        function animate() {
            requestAnimationFrame(animate);

            // Rotate particles
            particlesMesh.rotation.y += 0.0005;
            particlesMesh.rotation.x += 0.0003;

            // Mouse interaction
            particlesMesh.rotation.y += mouseX * 0.0002;
            particlesMesh.rotation.x += mouseY * 0.0002;

            renderer.render(scene, camera);
        }

        animate();

        // Handle resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>

    </nav>

    <!-- Booking Confirmation Modal -->
    <div id="booking-modal" class="modal-overlay">
        <div class="modal-content animate-fade-up">
            <div class="modal-icon">
                <i class="ph ph-check-circle"></i>
            </div>
            <h2>Booking Summary</h2>
            <div class="modal-body">
                <p>Hello <span id="modal-name"></span>,</p>
                <div style="background: rgba(255,255,255,0.03); padding: 15px; border-radius: 12px; margin: 15px 0;">
                    <p style="margin: 0; color: #888; font-size: 0.85rem;">Subjects:</p>
                    <p id="modal-subjects" style="color: #fff; font-weight: 600;"></p>
                    <div style="height: 1px; background: var(--glass-border); margin: 10px 0;"></div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: #888;">Class: <strong id="modal-class" style="color: #fff;"></strong></span>
                        <span style="color: #888;">Total: <strong id="modal-price"
                                style="color: var(--primary-color);"></strong></span>
                    </div>
                </div>

                <!-- UPI QR Code Section -->
                <div class="modal-qr-section"
                    style="background: rgba(255,255,255,0.03); padding: 20px; border-radius: 15px; margin: 20px 0; border: 1px solid var(--glass-border);">
                    <p style="margin-bottom: 15px; color: #bbb; font-size: 0.9rem;">Scan to Pay via UPI</p>
                    <div class="modal-qr-container"
                        style="background: white; padding: 15px; border-radius: 15px; display: inline-block;">
                        <img src="assets/upi-qr.jpeg" alt="UPI QR Code" class="modal-qr-img"
                            style="max-width: 180px; width: 100%; display: block; height: auto; border-radius: 8px;">
                    </div>
                    <div style="margin-top: 15px;">
                        <p style="font-size: 0.9rem; color: #fff; margin-bottom: 5px;">UPI ID: <b>mmuhsinu2-1@okaxis</b>
                        </p>
                        <p style="font-size: 0.8rem; color: #888;">Name: Mo Mhn</p>
                    </div>
                </div>

                <p class="modal-note">Click "Proceed to Pay" to visit your UPI app and confirm the booking.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="modal-pay-btn" style="width: 100; padding: 15px;">Proceed to
                    Pay</button>
                <button onclick="closeBookingModal()"
                    style="margin-top: 15px; background: none; border: none; color: #666; cursor: pointer; font-size: 0.9rem;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK v10 (Modular) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, query, where, orderBy, onSnapshot, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDY3La232JPHrnwPL_VfwQKJ07JLIEHAZE",
            authDomain: "my-pc-895cd.firebaseapp.com",
            databaseURL: "https://my-pc-895cd-default-rtdb.firebaseio.com",
            projectId: "my-pc-895cd",
            storageBucket: "my-pc-895cd.firebasestorage.app",
            messagingSenderId: "970176385787",
            appId: "1:970176385787:web:d21a6d1ef8079934fb565e",
            measurementId: "G-NKFHNQ88XG"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const rtdb = getDatabase(app);

        // Expose to window for external access
        window.firebaseApp = app;
        window.db = db;
        window.rtdb = rtdb;
        window.firestoreUtils = { collection, addDoc, serverTimestamp };

        const subjectContainer = document.getElementById('subject-checkboxes');
        const totalPriceEl = document.getElementById('total-price');

        // 1. Dynamic Subject Loader
        function updateTotalPrice() {
            let total = 0;
            document.querySelectorAll('#subject-checkboxes input:checked').forEach(cb => {
                total += Number(cb.dataset.price);
            });
            if (totalPriceEl) totalPriceEl.textContent = `‚Çπ${total}`;
            const hiddenPrice = document.getElementById('booking-price-hidden');
            if (hiddenPrice) hiddenPrice.value = total;
        }

        onSnapshot(query(collection(db, "subjects"), where("active", "==", true), orderBy("name")), snap => {
            if (!subjectContainer) return;
            subjectContainer.innerHTML = "";
            snap.forEach(doc => {
                const s = doc.data();
                const label = document.createElement('label');
                if (s.rtl) label.dir = 'rtl';
                label.innerHTML = `
                    <input type="checkbox" name="subject[]" value="${s.name} (‚Çπ${s.price})" data-price="${s.price}">
                    ${s.name} <span style="font-size: 0.8rem; opacity: 0.6;">(‚Çπ${s.price})</span>
                `;
                const input = label.querySelector('input');
                input.addEventListener('change', () => {
                    updateTotalPrice();
                    const selected = Array.from(document.querySelectorAll('#subject-checkboxes input:checked'))
                        .map(c => c.value).join(', ');
                    const hiddenSub = document.getElementById('booking-subjects-hidden');
                    if (hiddenSub) hiddenSub.value = selected;
                });
                subjectContainer.appendChild(label);
            });
        });

        // 2. Real-time Listeners (RTDB)
        onValue(ref(rtdb, "notice"), (snapshot) => {
            if (snapshot.val() === true) {
                const target = document.getElementById("gallerySection");
                if (target) {
                    target.scrollIntoView({ behavior: "smooth" });
                    setTimeout(() => set(ref(rtdb, "notice"), false), 5000);
                }
            }
        });

        // 3. GitHub Media Sync
        const galleryList = document.getElementById('gallery-list');
        const videoList = document.getElementById('video-list');
        const downloadIcon = `<svg viewBox="0 0 24 24" style="width:16px; height:16px; fill:currentColor;"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>`;

        fetch("https://api.github.com/repos/Sareef6235/muhsinu2/contents/assets/gallary")
            .then(res => res.json())
            .then(files => {
                if (Array.isArray(files) && galleryList) {
                    // Dynamic loading logic if needed
                }
            }).catch(err => console.error("Image sync failed:", err));

        // 4. PDF Sync
        const pdfList = document.getElementById('pdf-list');
        function addPdfToSessions(name, url) {
            const item = document.createElement("div");
            item.className = "session-card pdf-card animate-fade-up";
            item.innerHTML = `
                <div class="pdf-info">
                    <i class="ph ph-file-pdf" style="font-size: 2rem; color: #ff4d4d;"></i>
                    <div>
                        <h4>${name.replace(/\.pdf$/i, '')}</h4>
                        <p>Official Document / Certificate</p>
                    </div>
                </div>
                <a href="${url}" target="_blank" class="btn-pdf">View Document</a>
            `;
            if (pdfList) pdfList.appendChild(item);
        }

        fetch("https://api.github.com/repos/Sareef6235/muhsinu2/contents/assets/pdfs")
            .then(res => res.json())
            .then(files => {
                if (Array.isArray(files)) {
                    const hasPdfs = files.some(f => f.name.match(/\.(pdf)$/i));
                    if (hasPdfs && pdfList) pdfList.innerHTML = '';
                    files.forEach(file => {
                        if (file.type === "file" && file.name.match(/\.(pdf)$/i)) {
                            addPdfToSessions(file.name, file.download_url);
                        }
                    });
                }
            }).catch(err => console.error("PDF sync failed:", err));

        // 5. Exam Result Logic
        const RESULT_SHEET_ID = "1oG1NRnlekVEj8U6bAm-qNKL2N0LZj3kgNI1UMASvQKU";
        const RESULT_TAB_NAME = "class1";

        window.fetchHomeResult = async function () {
            const regnoInput = document.getElementById('home-regno');
            const regno = regnoInput.value.trim().toUpperCase();
            const status = document.getElementById('home-status');
            const container = document.getElementById('home-result-container');
            const area = document.getElementById('home-result-area');

            if (!regno) return;
            status.innerHTML = "Syncing with database...";
            container.style.display = "none";

            const url = `https://docs.google.com/spreadsheets/d/${RESULT_SHEET_ID}/gviz/tq?tqx=out:json&sheet=${RESULT_TAB_NAME}`;

            try {
                const response = await fetch(url);
                const text = await response.text();
                const json = JSON.parse(text.substring(47).slice(0, -2));
                const cols = json.table.cols;
                const rows = json.table.rows;

                const findIdx = (keywords) => cols.findIndex(c => (c.label || "").toLowerCase().includes(keywords[0]));
                const idxMap = { id: findIdx(['id', 'reg']), name: findIdx(['name']) };
                const getVal = (row, idx) => (row && row.c[idx]) ? (row.c[idx].f || String(row.c[idx].v) || "") : "";

                const student = rows.find(r => getVal(r, idxMap.id).trim().toUpperCase() === regno);

                if (student) {
                    const name = getVal(student, idxMap.name);
                    status.innerHTML = "‚úÖ Record Found";
                    area.innerHTML = `
                        <div style="font-size: 1.4rem; font-weight: 700; color: #fff; margin-bottom: 8px; direction: rtl;">${name}</div>
                        <div style="display: flex; align-items: center; gap: 12px; background: rgba(255,255,255,0.05); padding: 10px 15px; border-radius: 8px;">
                            <span style="color: #888; font-size: 0.9rem;">Exam Status:</span>
                            <span style="color: #00ff88; font-weight: 700; text-transform: uppercase;">PUBLISHED</span>
                        </div>
                    `;
                    container.style.display = "block";
                } else {
                    status.innerHTML = "‚ùå ID not found";
                }
            } catch (err) {
                console.error(err);
                status.innerHTML = "‚ö†Ô∏è Error";
            }
        };

        document.getElementById('home-regno')?.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') window.fetchHomeResult();
        });
    </script>


    <footer
        style="background: #0a0a0a; border-top: 1px solid var(--glass-border); padding: 60px 0 30px; margin-top: 80px;">
        <div class="container">
            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-bottom: 40px;">
                <div>
                    <h3 style="color: var(--primary-color); margin-bottom: 20px; font-size: 1.3rem;">MIFTHAHUL HUDA
                        MADRASA</h3>
                    <p style="color: #888; line-height: 1.8;">Empowering students through quality education and Islamic
                        values at Vengara S S Road.</p>
                </div>
                <div>
                    <h4 style="color: #fff; margin-bottom: 20px;">Quick Links</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 12px;"><a href="#about"
                                style="color: #888; text-decoration: none; transition: 0.3s;"
                                onmouseover="this.style.color='var(--primary-color)'"
                                onmouseout="this.style.color='#888'">About Us</a></li>
                        <li style="margin-bottom: 12px;"><a href="services.html"
                                style="color: #888; text-decoration: none; transition: 0.3s;"
                                onmouseover="this.style.color='var(--primary-color)'"
                                onmouseout="this.style.color='#888'">Services</a></li>
                        <li style="margin-bottom: 12px;"><a href="#booking"
                                style="color: #888; text-decoration: none; transition: 0.3s;"
                                onmouseover="this.style.color='var(--primary-color)'"
                                onmouseout="this.style.color='#888'">Book Tuition</a></li>
                        <li style="margin-bottom: 12px;"><a href="exam_result.html"
                                style="color: #888; text-decoration: none; transition: 0.3s;"
                                onmouseover="this.style.color='var(--primary-color)'"
                                onmouseout="this.style.color='#888'">Exam Results</a></li>
                        <li style="margin-bottom: 12px;"><a href="student_dashboard.html"
                                style="color: #888; text-decoration: none; transition: 0.3s;"
                                onmouseover="this.style.color='var(--primary-color)'"
                                onmouseout="this.style.color='#888'">Student Dashboard</a></li>
                        <li style="margin-bottom: 12px;"><a href="#gallery"
                                style="color: #888; text-decoration: none; transition: 0.3s;"
                                onmouseover="this.style.color='var(--primary-color)'"
                                onmouseout="this.style.color='#888'">Gallery</a></li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #fff; margin-bottom: 20px;">Contact</h4>
                    <p style="color: #888; margin-bottom: 10px;">üìç Vengara S S Road</p>
                    <p style="color: #888; margin-bottom: 10px;">üìû <a href="https://wa.me/916235989198"
                            style="color: #888; text-decoration: none;">+91 6235989198</a></p>
                    <p style="color: #888;">‚úâÔ∏è Contact via WhatsApp</p>
                </div>
                <div>
                    <h4 style="color: #fff; margin-bottom: 20px;">Enroll Now</h4>
                    <p style="color: #888; margin-bottom: 20px; line-height: 1.6;">Start your learning journey with us
                        today!</p>
                    <a href="#booking" class="btn btn-primary" style="display: inline-block;">Book a Tuition Session</a>
                </div>
            </div>
            <div
                style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 30px; text-align: center; display: flex; flex-direction: column; gap: 10px;">
                <p style="color: #666; font-size: 0.9rem;">¬© 2026 MHMV. All rights reserved.</p>
                <a href="admin/" style="color: #333; font-size: 0.75rem; text-decoration: none;">Admin Access</a>
            </div>
        </div>
    </footer>
    <!-- WhatsApp Floating Button -->
    <div class="whatsapp-float-wrapper">
        <a href="https://wa.me/916235989198" class="whatsapp-btn" target="_blank" aria-label="Contact us on WhatsApp">
            <i class="ph-fill ph-whatsapp-logo"></i>
        </a>
    </div>
    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="bottom-nav-container">
            <a href="index.html#hero" class="nav-item active">
                <i class="ph ph-house"></i>
                <span>Home</span>
            </a>
            <a href="gallery.html" class="nav-item">
                <i class="ph ph-image"></i>
                <span>Gallery</span>
            </a>
            <a href="services.html" class="nav-item">
                <i class="ph ph-briefcase"></i>
                <span>Services</span>
            </a>

            <!-- CENTER ACTION BUTTON -->
            <a href="index.html#booking" class="btn-book-nav" aria-label="Book Tuition">
                <i class="ph-bold ph-calendar-plus" style="color: #000; font-size: 1.6rem;"></i>
            </a>

            <a href="creative.html" class="nav-item">
                <i class="ph ph-student"></i>
                <span>Student</span>
            </a>
            <a href="index.html#contact" class="nav-item">
                <i class="ph ph-chat-circle"></i>
                <span>Contact</span>
            </a>
        </div>
    </nav>
    <script type="module" src="auth-nav-guard.js"></script>
</body>

</html>