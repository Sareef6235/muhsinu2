:root {
  --bg-gradient: linear-gradient(135deg, #d9e4ff, #eef4ff 30%, #ddefff 60%, #d7d6ff);
  --text: #11223f;
  --muted: #506383;
  --card-bg: rgba(255, 255, 255, 0.58);
  --border: rgba(255, 255, 255, 0.4);
  --shadow: 0 20px 50px rgba(30, 61, 132, 0.16);
  --primary: #3f5efb;
  --primary-2: #6f7dff;
}

body.dark {
  --bg-gradient: linear-gradient(140deg, #0f172a, #111827 40%, #1e1b4b 100%);
  --text: #e9efff;
  --muted: #9bb0d3;
  --card-bg: rgba(16, 28, 54, 0.62);
  --border: rgba(153, 177, 230, 0.22);
  --shadow: 0 20px 50px rgba(0, 0, 0, 0.35);
  --primary: #6a8dff;
  --primary-2: #9ca8ff;
}

* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: Inter, system-ui, sans-serif;
  background: var(--bg-gradient);
  color: var(--text);
  min-height: 100vh;
}

.glass {
  backdrop-filter: blur(18px);
  background: var(--card-bg);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  border-radius: 18px;
}

.page-wrap { max-width: 1220px; margin: 1rem auto; padding: 0 1rem 3rem; }
.app-header, .app-footer {
  max-width: 1220px;
  margin: 1rem auto;
  padding: 1rem 1.2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
}
.app-header h1 { margin: 0; font-size: 1.45rem; }
.app-header p, .app-footer p { margin: .2rem 0 0; color: var(--muted); }
.header-controls { display: flex; gap: .6rem; }

.top-controls, .tab-nav, .section-card, .admin-panel { padding: 1rem; margin-bottom: 1rem; }
.top-controls { display: grid; gap: .8rem; }
.top-controls select, .toolbar select, .toolbar input, .admin-login-form input {
  width: 100%;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.35);
  color: var(--text);
  border-radius: 10px;
  padding: .65rem .7rem;
}
body.dark .top-controls select,
body.dark .toolbar select,
body.dark .toolbar input,
body.dark .admin-login-form input { background: rgba(30,45,75,.5); }

.profile-info { color: var(--muted); font-size: .92rem; }
.tab-nav { display: flex; gap: .5rem; overflow-x: auto; }
.tab-btn {
  border: none;
  border-radius: 10px;
  padding: .65rem .95rem;
  background: transparent;
  color: var(--text);
  cursor: pointer;
}
.tab-btn.active { background: linear-gradient(120deg, var(--primary), var(--primary-2)); color: #fff; }

.tab-panel { display: none; animation: fadeUp .35s ease; }
.tab-panel.active { display: block; }
@keyframes fadeUp { from { opacity: 0; transform: translateY(8px);} to {opacity: 1; transform:none;} }

.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1rem;
}
.dashboard-card {
  padding: 1rem;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: var(--card-bg);
  transform-style: preserve-3d;
  transition: transform .25s ease, box-shadow .25s ease;
}
.dashboard-card:hover { transform: translateY(-5px) rotateX(2deg); box-shadow: 0 16px 25px rgba(80,80,150,.2); }
.dashboard-card h3 { margin: 0; font-size: .95rem; color: var(--muted); }
.dashboard-card strong { font-size: 1.4rem; }

.section-title-row { display: flex; justify-content: space-between; gap: .7rem; align-items: center; }
.toolbar { display: grid; gap: .6rem; grid-template-columns: repeat(auto-fit, minmax(170px, 1fr)); margin: .9rem 0; }
.table-wrap { overflow-x: auto; }
table { width: 100%; border-collapse: collapse; }
th, td { border-bottom: 1px solid var(--border); text-align: left; padding: .65rem .4rem; font-size: .93rem; }
.pagination { display: flex; gap: .4rem; margin-top: .8rem; flex-wrap: wrap; }

.btn {
  border-radius: 10px;
  border: 1px solid transparent;
  padding: .58rem .86rem;
  cursor: pointer;
  font-weight: 600;
}
.btn-primary { background: linear-gradient(120deg, var(--primary), var(--primary-2)); color: #fff; }
.btn-outline { background: transparent; border-color: var(--border); color: var(--text); }
.btn.small { padding: .3rem .55rem; font-size: .82rem; }

.result-summary { display: grid; gap: .7rem; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
.summary-box, .mark-row, .announcement { border: 1px solid var(--border); border-radius: 12px; padding: .8rem; background: rgba(255,255,255,.2); }
.announcement.urgent { border-color: #ff5a5a; background: rgba(255, 90, 90, 0.11); }

.admin-panel.hidden, .admin-only.hidden { display: none !important; }
.admin-login-form { display: grid; gap: .6rem; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
.admin-state { margin-top: .6rem; color: var(--muted); }

.loading-overlay {
  position: fixed; inset: 0; background: rgba(10, 17, 36, 0.4);
  display: grid; place-content: center; gap: .8rem; z-index: 999; color: #fff;
}
.loading-overlay.hidden { display: none; }
.spinner {
  width: 48px; height: 48px;
  border-radius: 50%; border: 4px solid rgba(255,255,255,.35); border-top-color: #fff;
  animation: spin 1s linear infinite; margin-inline: auto;
}
@keyframes spin { to { transform: rotate(360deg); } }

#jsonUpload { display: none; }

@media (max-width: 700px) {
  .app-header, .app-footer { flex-direction: column; align-items: flex-start; }
  .section-title-row { flex-direction: column; align-items: flex-start; }
}
