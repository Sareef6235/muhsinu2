<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Deploy Results JSON</title>
<style>
  .btn { padding: 8px 16px; font-size: 16px; cursor: pointer; }
  .btn-primary { background-color: #007bff; color: white; border: none; border-radius: 4px; }
</style>
</head>
<body>

<h3>Deploy Secure Link</h3>
<button class="btn btn-primary" onclick="deployJSON()">Deploy Secure Link</button>
<div id="jsonStatus" style="margin-top: 10px; color: green;"></div>

<script>
// Function to deploy JSON
function deployJSON() {
  // Full example results JSON
  const data = {
    meta: { generatedAt: new Date().toISOString(), published: true },
    exams: [
      {
        examId: "ex_1770660897473",
        examName: "4 (sdsdg)",
        published: true,
        results: [
          { roll: "4029", name: "محمد محسن", subjects: { "QURA'N HIFZ": 3, "FIQH": 0, "LISAN QURAA'N": 0, "AQEEDA": 0, "THAJVEETH": 0, "THAREEKH": 0, "AQLAQH": 0, "THAFHEEMU THILAVAH": 64, "THAFSEER": 0 }, total: 67 },
          { roll: "4030", name: "رزل رزاق", subjects: { "QURA'N HIFZ": 0, "THAFHEEMU THILAVAH": 70 }, total: 70 },
          { roll: "4031", name: "آبس جليل", subjects: { "QURA'N HIFZ": 0, "THAFHEEMU THILAVAH": 94 }, total: 94 },
          { roll: "4032", name: "إشا فاطمة", subjects: { "QURA'N HIFZ": 0, "THAFHEEMU THILAVAH": 2 }, total: 2 },
          { roll: "4033", name: "هزل مريم", subjects: { "QURA'N HIFZ": 0, "THAFHEEMU THILAVAH": 80 }, total: 80 }
          // add remaining results here
        ]
      }
    ]
  };

  fetch("/save-json", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(result => {
    document.getElementById("jsonStatus").innerText =
      result.success ? "Deployment Success ✅" : "Deployment Failed ❌";
  })
  .catch(err => {
    console.error(err);
    document.getElementById("jsonStatus").innerText = "Error during deployment ❌";
  });
}
</script>

</body>
</html>
