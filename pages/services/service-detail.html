<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Detail | MIFTHAHUL HUDA MADRASA</title>
    <link rel="stylesheet" href="../../assets/css/styles.css">
    <link rel="stylesheet" href="../../assets/css/modern-nav.css">
    <link rel="stylesheet" href="../../assets/css/site-footer.css">
    <link rel="stylesheet" href="../../assets/css/site-languages.css">
    <script src="../../assets/js/site-languages.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Cairo:wght@400;700&family=Manjari:wght@400;700&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        body {
            background: #000;
            color: #fff;
        }

        #service-render-target {
            min-height: 100vh;
        }

        .back-btn-container {
            position: fixed;
            top: 120px;
            left: 40px;
            z-index: 100;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 25px;
            border-radius: 50px;
            color: #fff;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: 0.3s;
        }

        .back-btn:hover {
            background: var(--primary-color);
            color: #000;
            transform: translateX(-5px);
            border-color: var(--primary-color);
        }

        [dir="rtl"] .back-btn-container {
            left: auto;
            right: 40px;
        }

        [dir="rtl"] .back-btn i {
            transform: rotate(180deg);
        }

        @media (max-width: 768px) {
            .back-btn-container {
                top: 100px;
                left: 20px;
            }

            [dir="rtl"] .back-btn-container {
                right: 20px;
            }
        }
    </style>
</head>

<body>
    <header id="main-header"></header>

    <div class="back-btn-container">
        <a href="./" class="back-btn">
            <i class="ph-bold ph-arrow-left"></i>
            <span data-t="back_to_services">Back to Services</span>
        </a>
    </div>

    <main id="service-render-target">
        <!-- Dynmamically rendered content -->
    </main>

    <footer id="main-footer"></footer>

    <script type="module">
        import { ServicesCMS } from '../../assets/js/services-cms.js';
        import { ServiceRenderer } from '../../assets/js/service-renderer.js';

        const target = document.getElementById('service-render-target');
        const urlParams = new URLSearchParams(window.location.search);
        const serviceId = urlParams.get('id');

        async function init() {
            if (!serviceId) {
                window.location.href = 'index.html';
                return;
            }

            const service = await ServicesCMS.getById(serviceId);
            if (!service) {
                target.innerHTML = '<div class="container" style="padding: 200px 0; text-align: center;"><h1>Service not found</h1><a href="index.html">Go Back</a></div>';
                return;
            }

            // Document Title
            const lang = document.documentElement.lang || 'en';
            const content = service.content[lang] || service.content.en;
            document.title = `${content.title} | MIFTHAHUL HUDA MADRASA`;

            // Render
            target.innerHTML = ServiceRenderer.render(service, lang);
        }

        // Initialize and watch for language changes
        init();
        window.addEventListener('siteLangChange', () => init());
        window.addEventListener('services-updated', () => init());
    </script>

    <script src="../../assets/js/site-nav.js" defer></script>
    <script src="../../assets/js/site-footer.js" defer></script>
    <script src="../../assets/js/script.js" defer></script>
</body>

</html>