<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creative Corner - MIFTHAHUL HUDA MADRASA</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

</head>

<body>
    <header id="main-header">
        <nav class="container">
            <a href="index.html#hero" class="logo">MHMV 2026.</a>
            <ul class="nav-links">
                <li><a href="index.html#hero">Home</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Gallery</a>
                    <ul class="dropdown-menu">
                        <li><a href="index.html#gallerySection">Photo Gallery</a></li>
                        <li><a href="gallery.html">Video Gallery</a></li>
                    </ul>
                </li>
                <li><a href="creations.html">Creations</a></li>
                <li><a href="creative.html" class="active">Creative Corner</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Result</a>
                    <ul class="dropdown-menu">
                        <li><a href="result.html">Exam Result (New)</a></li>
                        <li><a href="exam_result.html">Exam Result (Old)</a></li>
                        <li><a href="meelad_result.html">Meelad Result</a></li>
                    </ul>
                </li>
                <li><a href="index.html#news-notice">News</a></li>
                <li><a href="index.html#contact" class="btn-secondary" style="padding: 8px 15px;">Contact</a></li>
            </ul>
            <button class="mobile-menu-btn" aria-label="Toggle navigation">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </nav>
    </header>

    <header class="creative-header">
        <h1 class="creative-title">üé® Creative Corner</h1>
        <p>Student Creations ‚Äì Admin Approved</p>
    </header>

    <!-- ================= STUDENT SUBMIT ================= -->
    <section>
        <div class="card creation-card submission-card animate-fade-up">
            <h2>üì§ Submit Your Work</h2>

            <div class="creative-input-group">
                <input id="name" placeholder="Student Name">
                <input id="cls" placeholder="Class">
            </div>

            <div class="creative-input-group">
                <select id="type">
                    <option value="" disabled selected>Select category</option>
                    <option value="Drawing">Drawing / Visual Art</option>
                    <option value="Story">Story / Literary Work</option>
                    <option value="Poem">Poem</option>
                    <option value="Other">Other Creation</option>
                </select>
                <input id="title" placeholder="Title">
            </div>

            <textarea id="content" placeholder="Story / Message" rows="5"></textarea>

            <div
                style="margin-top: 15px; background: rgba(255,255,255,0.03); padding: 20px; border-radius: 12px; border: 1px dashed rgba(255,255,255,0.1);">
                <label for="file"
                    style="display: block; color: var(--primary-color); font-size: 0.95rem; margin-bottom: 10px; font-weight: 600;">
                    <i class="ph ph-image"></i> Upload Image (optional)
                </label>
                <input type="file" id="file" accept="image/*"
                    style="padding: 0; background: transparent; border: none; margin: 0;">
            </div>

            <button onclick="submitWork()">Submit for Review</button>
            <div id="status-msg" class="submission-status"></div>
        </div>
    </section>

    <!-- ================= GALLERY ================= -->
    <section>
        <h2 class="section-title" style="text-align: center;">üñº Approved Creations</h2>
        <div class="grid" id="gallery"></div>
    </section>

    <!-- ================= ADMIN LOGIN ================= -->
    <section id="adminLoginSection">
        <div class="card admin animate-fade-up">
            <h2>üîê Admin Login</h2>
            <p style="color: #888; margin-bottom: 20px;">Only teachers can approve submissions.</p>
            <input id="adminEmail" placeholder="Email">
            <input id="adminPass" type="password" placeholder="Password">
            <button onclick="adminLogin()">Login to Dashboard</button>
        </div>
    </section>

    <!-- ================= ADMIN PANEL ================= -->
    <section id="adminPanel" class="hidden">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
            <h2>üõ† Admin Approval Panel</h2>
            <button onclick="logout()"
                style="width: auto; padding: 10px 20px; margin: 0; background: #ff4444;">Logout</button>
        </div>
        <div class="grid" id="pending"></div>
    </section>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="bottom-nav-container">
            <a href="index.html#hero" class="nav-item">
                <i class="ph ph-house"></i>
                <span>Home</span>
            </a>
            <a href="creations.html" class="nav-item">
                <i class="ph ph-paint-brush"></i>
                <span>Creations</span>
            </a>
            <a href="creative.html" class="nav-item active">
                <i class="ph ph-palette"></i>
                <span>Corner</span>
            </a>
            <a href="gallery.html" class="nav-item">
                <i class="ph ph-image"></i>
                <span>Gallery</span>
            </a>
            <a href="result.html" class="nav-item">
                <i class="ph ph-exam"></i>
                <span>Result</span>
            </a>
        </div>
    </nav>

    <!-- WhatsApp Floating Button -->
    <div class="whatsapp-float-wrapper">
        <a href="https://wa.me/916235989198" class="whatsapp-btn" target="_blank" aria-label="Contact us on WhatsApp">
            <i class="ph-fill ph-whatsapp-logo"></i>
        </a>
    </div>

    <script src="script.js"></script>
    <script>
        // ===== ADMIN CREDENTIALS =====
        const ADMIN_EMAIL = "123v213@gmail.com";
        const ADMIN_PASS = "@#asd123";

        // ===== STORAGE =====
        let works = JSON.parse(localStorage.getItem("works") || "[]");

        // ===== SUBMIT =====
        function submitWork() {
            const nameEl = document.getElementById("name");
            const clsEl = document.getElementById("cls");
            const titleEl = document.getElementById("title");
            const contentEl = document.getElementById("content");
            const file = document.getElementById("file").files[0];
            const statusMsg = document.getElementById("status-msg");

            if (!nameEl.value || !clsEl.value || !titleEl.value) {
                alert("Please fill in Name, Class, and Title.");
                return;
            }

            const reader = new FileReader();

            reader.onload = () => {
                works.push({
                    name: nameEl.value,
                    cls: clsEl.value,
                    type: document.getElementById("type").value,
                    title: titleEl.value,
                    content: contentEl.value,
                    img: reader.result || "",
                    approved: false,
                    date: new Date().toLocaleDateString()
                });
                localStorage.setItem("works", JSON.stringify(works));
                statusMsg.innerHTML = "‚úÖ Submitted! Waiting for teacher approval.";
                statusMsg.style.color = "var(--primary-color)";

                // Reset form
                nameEl.value = "";
                clsEl.value = "";
                titleEl.value = "";
                contentEl.value = "";
                document.getElementById("file").value = "";

                setTimeout(() => {
                    location.reload();
                }, 2000);
            };

            if (file) reader.readAsDataURL(file);
            else reader.onload();
        }

        // ===== ADMIN LOGIN =====
        function adminLogin() {
            const email = document.getElementById("adminEmail").value;
            const pass = document.getElementById("adminPass").value;

            if (email === ADMIN_EMAIL && pass === ADMIN_PASS) {
                sessionStorage.setItem("admin", "true");
                document.getElementById("adminPanel").classList.remove("hidden");
                document.getElementById("adminLoginSection").classList.add("hidden");
                renderAdmin();
                window.scrollTo(0, document.getElementById("adminPanel").offsetTop - 100);
            } else {
                alert("Wrong credentials");
            }
        }

        function logout() {
            sessionStorage.removeItem("admin");
            location.reload();
        }

        // ===== ADMIN VIEW =====
        function renderAdmin() {
            const pending = document.getElementById("pending");
            pending.innerHTML = "";
            let count = 0;

            works.forEach((w, i) => {
                if (!w.approved) {
                    count++;
                    pending.innerHTML += `
                    <div class="card creation-card">
                        <span style="background: var(--primary-color); color: #000; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; font-weight: 700;">${w.type}</span>
                        <h4 style="margin: 15px 0 5px;">${w.title}</h4>
                        <p style="color: #888; font-size: 0.9rem; margin-bottom: 15px;">${w.name} ‚Äì Class ${w.cls}</p>
                        ${w.img ? `<img src="${w.img}">` : ``}
                        <p style="font-size: 0.95rem; line-height: 1.5; color: #ccc;">${w.content}</p>
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button onclick="approve(${i})" style="flex: 2; margin: 0;">Approve ‚úÖ</button>
                            <button onclick="reject(${i})" style="flex: 1; margin: 0; background: #333; color: #ff4444;">Delete üóëÔ∏è</button>
                        </div>
                    </div>`;
                }
            });

            if (count === 0) {
                pending.innerHTML = "<p style='grid-column: 1/-1; text-align: center; color: #666;'>No pending submissions.</p>";
            }
        }

        // ===== APPROVE =====
        function approve(i) {
            works[i].approved = true;
            localStorage.setItem("works", JSON.stringify(works));
            renderAdmin();
            renderGallery();
        }

        // ===== REJECT/DELETE =====
        function reject(i) {
            if (confirm("Are you sure you want to delete this submission?")) {
                works.splice(i, 1);
                localStorage.setItem("works", JSON.stringify(works));
                renderAdmin();
            }
        }

        // ===== PUBLIC GALLERY =====
        function renderGallery() {
            const gallery = document.getElementById("gallery");
            gallery.innerHTML = "";
            const approvedWorks = works.filter(w => w.approved);

            if (approvedWorks.length === 0) {
                gallery.innerHTML = "<p style='grid-column: 1/-1; text-align: center; color: #666;'>No approved creations yet. Be the first to submit!</p>";
                return;
            }

            approvedWorks.forEach(w => {
                gallery.innerHTML += `
                <div class="card creation-card animate-fade-up">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                        <span style="background: rgba(0, 243, 255, 0.1); color: var(--primary-color); padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; font-weight: 700;">${w.type}</span>
                        <span style="color: #555; font-size: 0.8rem;">${w.date || ''}</span>
                    </div>
                    <h3 style="margin-bottom: 5px; color: #fff;">${w.title}</h3>
                    <p style="color: var(--primary-color); font-size: 0.9rem; margin-bottom: 20px;">By ${w.name} (Class ${w.cls})</p>
                    ${w.img ? `<img src="${w.img}">` : ``}
                    <p style="font-size: 1rem; line-height: 1.6; color: #bbb;">${w.content}</p>
                </div>`;
            });
        }

        // ===== INIT =====
        renderGallery();
        if (sessionStorage.getItem("admin") === "true") {
            document.getElementById("adminPanel").classList.remove("hidden");
            document.getElementById("adminLoginSection").classList.add("hidden");
            renderAdmin();
        }
    </script>

</body>

</html>